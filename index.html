<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Karta obywatela</title>
    <meta name="viewport" content="width=device-width, initial-scale=0.8, user-scalable=no">
    <link rel="stylesheet" href="assets/index.css">
</head>
<body>
    <div class="card">
        <img id="photo" class="photo" src="https://i.imgur.com/vwIQErh.png" alt="Zdjęcie użytkownika">

        <div class="data">
            <p><strong>Imię:</strong> <span id="name"></span></p>
            <p><strong>Nazwisko:</strong> <span id="surname"></span></p>
            <p><strong>Płeć:</strong> <span id="sex"></span></p>
            <p><strong>Obywatelstwo:</strong> <span id="nationality"></span></p>
            <p><strong>Data urodzenia:</strong> <span id="birthday"></span></p>
            <p><strong>Nazwisko rodowe:</strong> <span id="familyName"></span></p>
            <p><strong>Nazwisko rodowe ojca:</strong> <span id="fathersFamilyName"></span></p>
            <p><strong>Nazwisko rodowe matki:</strong> <span id="mothersFamilyName"></span></p>
            <p><strong>Miejsce urodzenia:</strong> <span id="birthPlace"></span></p>
            <p><strong>Kraj urodzenia:</strong> <span id="countryOfBirth"></span></p>
            <p><strong>Adres:</strong> <span id="adress1"></span></p>
            <p><strong>Kod pocztowy:</strong> <span id="adress2"></span></p>
            <p><strong>Miasto:</strong> <span id="city"></span></p>
            <p><strong>Data zameldowania:</strong> <span id="checkInDate"></span></p>
        </div>
    </div>

    <script>
        // Pobieranie parametrów z URL
        const params = new URLSearchParams(window.location.search);

        // Lista wszystkich pól, które mają się wypełnić
        const fields = [
            "name", "surname", "sex", "nationality", "birthday",
            "familyName", "fathersFamilyName", "mothersFamilyName",
            "birthPlace", "countryOfBirth", "adress1", "adress2",
            "city", "checkInDate"
        ];

        // Wypełnianie pól
        fields.forEach(field => {
            const el = document.getElementById(field);
            if (el && params.get(field)) {
                el.textContent = decodeURIComponent(params.get(field));
            }
        });

        // Obsługa zdjęcia (parametr ?photo=)
        const photo = params.get("photo");
        const photoEl = document.getElementById("photo");

        function isValidImgurLink(link) {
            return link && link.startsWith("https://i.imgur.com/") && (
                link.endsWith(".jpg") || link.endsWith(".jpeg") || link.endsWith(".png") || link.endsWith(".gif")
            );
        }

        if (isValidImgurLink(photo)) {
            photoEl.src = photo;
        } else {
            photoEl.src = "https://i.imgur.com/vwIQErh.png"; // domyślna grafika
        }
    </script>
</body>
</html>
