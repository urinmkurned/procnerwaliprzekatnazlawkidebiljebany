<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Discord Auth</title>
</head>
<body>

<h1>Ładowanie danych…</h1>

<div id="output"></div>

<script>
  const hash = window.location.hash.substring(1);
  const params = new URLSearchParams(hash);
  const token = params.get("access_token");

  if (!token) {
    document.getElementById("output").innerText = "Brak tokenu!";
  } else {
    fetch("https://discord.com/api/users/@me", {
      headers: { Authorization: `Bearer ${token}` }
    })
    .then(r => r.json())
    .then(user => {
      document.getElementById("output").innerHTML = `
        <h2>Zalogowano!</h2>
        <p>Nazwa: ${user.username}#${user.discriminator}</p>
        <p>ID: ${user.id}</p>
      `;
    })
    .catch(err => {
      document.getElementById("output").innerText = "Błąd: " + err;
    });
  }
</script>

</body>
</html>
